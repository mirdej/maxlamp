<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8"> 
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> 
		<link rel="stylesheet" href="src/bootstrap.min.css"> 
		<script src="src/jquery-3.4.1.min.js"></script> <script src="src/bootstrap.bundle.min.js"></script> 
		<link href="src/bootstrap-toggle.min.css" rel="stylesheet">
		<script src="src/bootstrap-toggle.min.js"></script>
		<title>
			Max-Lamp
		</title>
	</head>
	<body>
		<div class="container-fluid">
			<nav class="navbar navbar-expand-lg navbar-light bg-light">
				<a class="navbar-brand" href="#">
					MaxLamp by The Eggers
				</a>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon">
					</span>
				</button>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav mr-auto">
						<li class="nav-item active">
							<a class="nav-link" href="#">
								Home 
							<span class="sr-only">
								(current) 
							</span>
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="https://github.com/mirdej/maxlamp">
							Github 
						</a>
					</li>
				</ul>
			</div>
		</nav>
		<div class="card" id="bri">
			<div class="card-header">
				Control 
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-sm text-muted" id="response">
						On / Off
					</div>
					<div class="col-sm">
<form>
  <div class="form-group">
 <input type="checkbox" checked data-toggle="toggle" id="onoff" onclick="toggle()">
  </div>
</form>					
</div>
					<div class="col-sm text-right">
					</div>
				</div>
			</div>
		</div>
		<div class="card" id="bri">
			<div class="card-header">
				Brightness 
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-sm text-muted" id="response">
						Ajax Test
					</div>
					<div class="col-sm">
<form>
  <div class="form-group">
    <label for="slider">Brightness</label>
    <input type="range" class="form-control-range" id="slider" >
  </div>
</form>					</div>
					<div class="col-sm text-right">
						<a href="#" class="btn btn-primary" onclick="getData()">
							Go 
						</a>
					</div>
				</div>
			</div>
		</div>
		<div class="card" id="host">
			<div class="card-header">
				Hostname 
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-sm text-muted">
						Name of the device on the network 
					</div>
					<div class="col-sm">
						<form class="form-inline my-2 my-lg-0">
							<input type="text" name="HostName" class="form-control" id="hostname" placeholder="hostname" value="%HOSTNAME%" required>.local 
						</form>
					</div>
					<div class="col-sm text-right">
						<a href="#" class="btn btn-primary" onclick="setHostname()">
							Save 
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script>
 // With JQuery

 
$(document).ready(function(e) {   

document.getElementById("slider").oninput = function() {
    setBrightness()
};
})

  $(function() {
    $('#onoff').change(function() {
      toggle();
    })
  })

function toggle() {
   var val = document.getElementById("onoff").checked //gets the oninput value
   //document.getElementById('response').innerHTML = val //displays this value to the html page
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("response").innerHTML =
      this.responseText;
    }
  };
  xhttp.open("GET", "get?on="+val, true);
  xhttp.send();

}
function setHostname() {
   var val = document.getElementById("hostname").value //gets the oninput value
   //document.getElementById('response').innerHTML = val //displays this value to the html page
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("response").innerHTML =
      this.responseText;
    }
  };
  xhttp.open("GET", "get?hostname="+val, true);
  xhttp.send();

}

function setBrightness() {
   var val = document.getElementById("slider").value //gets the oninput value
   //document.getElementById('response').innerHTML = val //displays this value to the html page
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("response").innerHTML =
      this.responseText;
    }
  };
  xhttp.open("GET", "get?brightness="+val, true);
  xhttp.send();

}
  
function getData() {
alert("Hi");
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("response").innerHTML =
      this.responseText;
    }
  };
  xhttp.open("GET", "readADC", true);
  xhttp.send();
}
</script>
</body>
</html>
